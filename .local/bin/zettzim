#!/usr/bin/env bash
set -e

main() {
  cd $WIKI_PATH
  file_to_edit=`select_file`

  if [ -n "$file_to_edit" ] ; then
    nvim "$file_to_edit"
    main "$file_to_edit"
  fi
  cd -
}

select_file() {
  find *.zettel -path assets -prune -o -print -type f | fzf --preview="cat {}" --height=100% --preview-window=right:70%:wrap
}

main ""
